<%- include('../header') %>

<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card custom-card">
                <div class="card-body p-5">

                    <div class="text-center mb-4">
                        <h1 class="h3 text-gray-900 font-weight-bold">Register New Admin</h1>
                        <p class="text-muted">Fill in the details to create a new administrator account</p>
                    </div>

                    <form action="/insertAdmin" method="POST" enctype="multipart/form-data">

                        <div class="row">
                            <div class="col-sm-6 mb-3">
                                <label class="small font-weight-bold">First Name</label>
                                <input type="text" class="form-control" name="fname" required>
                            </div>
                            <div class="col-sm-6 mb-3">
                                <label class="small font-weight-bold">Last Name</label>
                                <input type="text" class="form-control" name="lname" required>
                            </div>
                        </div>

                        <div class="form-group mb-3">
                            <label class="small font-weight-bold">Email Address</label>
                            <input type="email" class="form-control" name="email" required>
                        </div>

                        <div class="form-group mb-3">
                            <label class="small font-weight-bold">Password</label>
                            <input type="password" class="form-control" name="password" required>
                        </div>

                        <div class="form-group mb-3">
                            <label class="small font-weight-bold">Phone Number</label>
                            <input type="number" class="form-control" name="phone">
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label class="font-weight-bold d-block">Gender</label>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="gender" value="Male">
                                    <label class="form-check-label">Male</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="gender" value="Female">
                                    <label class="form-check-label">Female</label>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <label class="font-weight-bold d-block">City</label>
                                <select class="form-control" name="city">
                                    <option value="">Select City</option>
                                    <option>Surat</option>
                                    <option>Pune</option>
                                    <option>Mumbai</option>
                                </select>
                            </div>
                        </div>

                        <!-- IMAGE UPLOAD WITH PREVIEW -->
                        <div class="form-group mb-4">
                            <label class="font-weight-bold">Profile Image</label>

                            <div class="custom-file">
                                <input type="file" class="custom-file-input" id="profileImg"
                                    name="profile_image" accept="image/*">
                                <label class="custom-file-label" for="profileImg">
                                    Choose image...
                                </label>
                            </div>

                            <div class="mt-3">
                                <img id="imgPreview"
                                    style="display:none; width:120px; height:120px; object-fit:cover; border:1px solid #ccc; border-radius:6px;">
                            </div>
                        </div>

                        <button type="submit" class="btn btn-primary btn-block">
                            Create Admin Account
                        </button>

                    </form>

                </div>
            </div>
        </div>
    </div>
</div>

<!-- IMAGE PREVIEW SCRIPT -->
<script>
    const fileInput = document.getElementById("profileImg");
    const imgPreview = document.getElementById("imgPreview");
    const fileLabel = document.querySelector(".custom-file-label");

    fileInput.addEventListener("change", function () {
        const file = this.files[0];

        if (!file) return;

        fileLabel.innerText = file.name;

        const reader = new FileReader();
        reader.onload = function (e) {
            imgPreview.src = e.target.result;
            imgPreview.style.display = "block";
        };
        reader.readAsDataURL(file);
    });
</script>

<%- include('../footer') %>
